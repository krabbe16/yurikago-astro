---
title: "M1 MacにZshフレームワークのZimを導入する"
description: "M1 MacにZshフレームワークのZimを導入する手順を解説しました。インストール方法やデフォルトモジュール、テーマ変更の手順を記載しました。"
publishDate: "2022-06-07T00:00:00.000+0900"
tags: ["Zsh", "Zim", "macOS"]
---

## Zim とは何ですか？

プラグインマネージャ、便利なモジュール、豊富なテーマを速度を犠牲にすることなくバンドルした Zsh 構成フレームワークです。最初のプロンプトが表示されるまでの時間を測定したところ、測定対象の中で上から 3 番目に速いという結果が示されています。以前に使ったことのある Prezto は約 0.14sec、Zim は約 0.06sec でした。半分以下ですね…🤔

測定方法、結果については以下の Wiki で確認できます。
https://github.com/zimfw/zimfw/wiki/Speed

## 検証環境

- M1 MBP@12.4
- Zsh@5.8.1
- Zim@1.9.1

## インストール

自動インストール、手動インストールがあります。
今回は簡単に導入できる自動インストールを試します。
インストール手順は README を参照しました。

https://github.com/zimfw/zimfw

```shell
% curl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh
) Using Zsh version 5.8.1
) ZIM_HOME not set, using the default one.
) Zsh is your default shell.
) Downloaded the Zim script to /Users/xxx/.zim/zimfw.zsh
) Prepended Zim template to /Users/xxx/.zimrc
) Prepended Zim template to /Users/xxx/.zshrc
) Installed modules.
All done. Enjoy your Zsh IMproved! Restart your terminal for changes to take effect.
```

コマンドの実行後にターミナルを再起動すれば完了です。
`~/.zshrc`に zim の設定が追記されています。

## 有効になる機能

デフォルトだと以下のモジュールが読み込まれています。

| モジュール名                           | 説明                                                                                                                                       |
| -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| environment                            | 正常な Zsh 組み込み環境オプションを設定します。                                                                                            |
| git                                    | 便利な git エイリアスや関数を提供します。                                                                                                  |
| input                                  | 入力イベントに対して正しいバインドキーを適用します。                                                                                       |
| termtitle                              | カスタム端末のタイトルを設定します。                                                                                                       |
| utility                                | ユーティリティのエイリアスや関数。ls, grep, less に色をつけます。                                                                          |
| duration-info                          | asciiship で使用される、最後のコマンドの実行にかかった時間をプロンプトに公開します。                                                       |
| git-info                               | asciiship で使用される、git リポジトリの状態情報をプロンプトに公開します。                                                                 |
| asciiship                              | スペースシップとスターシップのプロンプトを大幅に縮小した、ASCII のみのバージョンです。                                                     |
| zsh-users/zsh-completions --fpath src  | Zsh の補完定義を追加します。                                                                                                               |
| completion                             | スマートで広範囲なタブ補完を有効にし設定します。completion モジュールは補完定義を追加するすべてのモジュールの後に読み込む必要があります。  |
| zsh-users/zsh-syntax-highlighting      | Zsh 用の Fish のようなシンタックスハイライト。zsh-users/zsh-syntax-highlighting は completion モジュールの後に読み込む必要があります。     |
| zsh-users/zsh-history-substring-search | Zsh 用の Fish のような履歴検索。zsh-users/zsh-history-substring-search は zsh-users/zsh-syntax-highlighting の後に読み込む必要があります。 |
| zsh-users/zsh-autosuggestions          | Zsh 用の Fish のようなオートサジェスト                                                                                                     |

その他のモジュールの一覧
https://zimfw.sh/docs/modules/

## テーマの変更

デフォルトでは asciiship というテーマが適用されています。
テーマを変更したい場合は`~/.zimrc`を編集します。

```text title=".zimrc"
# asciishipをコメントアウト
# zmodule asciiship
# 設定したいテーマ名を指定
zmodule steeef
```

テーマの一覧
https://zimfw.sh/docs/themes/

追記後、以下のコマンドを実行します。

```shell
% zimfw install
```

テーマモジュールのインストール後、ターミナルを再起動すれば完了です。

## チートシート

便利なコマンドのエイリアスが組み込まれています。
例えば `G` は `git` のエイリアスとなっています。

エイリアスの一覧
https://zimfw.sh/docs/cheatsheet/

## おわりに

インストールするとすぐにオートサジェストやシンタックスハイライトが有効になるのが便利ですね 👍
デフォルトの状態でも十分便利ですが、以下の記事のようにモジュールの挙動を細かくカスタマイズできるようなので気になる方は試してみてはいかがでしょうか。
https://takuyatsuchida.com/build-zsh-environment-by-zim-framework/
